@page "/"
@inherits AutoScrollComponentBase

<PageTitle>MASA Stack - 开源企业级开发者门户 平台工程</PageTitle>

<div class="home-banner">
    <MCarousel @bind-Value="_carouselValue" Style="position: relative"
               ShowArrows="false" HideDelimiters
               Cycle Continuous Height="@("100%")">
        <MCarouselItem>
            <MRow NoGutters Style="height: 100%">
                <MCol Cols="12" Lg="6" Class="intro-wrapper">
                    <div class="intro">
                        <div class="intro-title">开源企业级开发者门户&#10;平台工程</div>
                        <div class="intro-subtitle">让开发者聚焦业务价值的实现</div>
                        <div class="intro-actions">
                            <MButton Class="gradual-btn" Text Ripple="false" Href="/stack">了解更多</MButton>
                            <MButton Text Ripple="false" Class="text-capitalize"
                                     Href="https://github.com/masastack" Target="_blank">
                                <MIcon Class="mr-2">mdi-github</MIcon>
                                Github
                            </MButton>
                        </div>
                    </div>
                </MCol>
                <MCol Cols="12" Lg="6" Class="cover-wrapper"
                      @ontouchstart="OnTouchstart"
                      @ontouchmove="OnTouchmove"
                      @ontouchend="OnTouchend"
                      @ontouchcancel="OnTouchend">
                    <MImage Src="https://cdn.masastack.com/images/banner1.png"
                            Contain Width="@("100%")" Height="@("100%")"
                            MaxWidth="BannerMaxSize" MaxHeight="BannerMaxSize" />
                </MCol>
            </MRow>
        </MCarouselItem>
        <MCarouselItem>
            <MRow NoGutters Style="height: 100%">
                <MCol Cols="12" Lg="6" Class="intro-wrapper">
                    <div class="intro">
                        <div class="intro-title">传统.NET中大型项目&#10;升级宝典</div>
                        <div class="intro-subtitle">使用MASA Stack对现有.NET程序进行现代化改造</div>
                        <div class="intro-actions">
                            <MButton Class="gradual-btn" Text Ripple="false" Href="/stack">了解更多</MButton>
                        </div>
                    </div>
                </MCol>
                <MCol Cols="12" Lg="6" Class="cover-wrapper"
                      @ontouchstart="OnTouchstart"
                      @ontouchmove="OnTouchmove"
                      @ontouchend="OnTouchend"
                      @ontouchcancel="OnTouchend">
                    <MImage Src="https://cdn.masastack.com/images/banner2.png"
                            Contain Width="@("100%")" Height="@("100%")"
                            MaxWidth="BannerMaxSize" MaxHeight="BannerMaxSize" />
                </MCol>
            </MRow>
        </MCarouselItem>
        <MCarouselItem>
            <MRow NoGutters Style="height: 100%">
                <MCol Cols="12" Lg="6" Class="intro-wrapper">
                    <div class="intro">
                        <div class="intro-title">.NET开发者迈向云原生&#10;如何选择？</div>
                        <div class="intro-subtitle">.NET数字化转型人才成长最优解</div>
                        <div class="intro-actions">
                            <MButton Class="gradual-btn" Text Ripple="false" Href="/framework">了解更多</MButton>
                        </div>
                    </div>
                </MCol>
                <MCol Cols="12" Lg="6" Class="cover-wrapper"
                      @ontouchstart="OnTouchstart"
                      @ontouchmove="OnTouchmove"
                      @ontouchend="OnTouchend"
                      @ontouchcancel="OnTouchend">
                    <MImage Src="https://cdn.masastack.com/images/banner3.png"
                            Contain Width="@("100%")" Height="@("100%")"
                            MaxWidth="BannerMaxSize" MaxHeight="BannerMaxSize" />
                </MCol>
            </MRow>
        </MCarouselItem>

        <MItemGroup Class="carousel-dot" @bind-Value="_carouselValue"
                    ActiveClass="primary--text"
                    Mandatory>
            <MItem>
                <MButton Icon Small="!IsMobile" XSmall="IsMobile"
                         Class="@($"regular3--text mr-n2 {context.ActiveClass}")"
                         OnClick="() => context.Toggle()">
                    <MIcon XSmall="IsMobile">
                        mdi-circle-medium
                    </MIcon>
                </MButton>
            </MItem>
            <MItem>
                <MButton Icon Small="!IsMobile" XSmall="IsMobile"
                         Class="@($"regular3--text mr-n2 {context.ActiveClass}")"
                         OnClick="() => context.Toggle()">
                    <MIcon XSmall="IsMobile">
                        mdi-circle-medium
                    </MIcon>
                </MButton>
            </MItem>
            <MItem>
                <MButton Icon Small="!IsMobile" XSmall="IsMobile"
                         Class="@($"regular3--text mr-n2 {context.ActiveClass}")"
                         OnClick="() => context.Toggle()">
                    <MIcon XSmall="IsMobile">
                        mdi-circle-medium
                    </MIcon>
                </MButton>
            </MItem>
        </MItemGroup>
    </MCarousel>

    @if (IsMobile)
    {
        <div class="home-banner__slider-wrapper"
             style="background-image: url('https://cdn.masastack.com/images/mUnion.png'); background-size: 100% 100%">
            <div style="display: contents" @onclick="ScrollToNext">
                <MIcon Small Color="#E2E7F4">mdi-chevron-double-up</MIcon>
                <div class="more">更多产品</div>
            </div>
        </div>
    }
    else
    {
        <div class="home-banner__slider-wrapper">
            <MItemGroup @bind-Value="_carouselValue" ActiveClass="active">
                <MRow NoGutters Class="slider">
                    <MItem>
                        <MCol Class="slider-item" Cols="4" @onclick="() => _carouselValue = 0">
                            <div class="number @context.ActiveClass">01</div>
                            <PBlockText Style="width: calc(100% - 56px)"
                                        Primary="开源企业级开发者门户 平台工程"
                                        Secondary="让开发者聚焦业务价值的实现"
                                        PrimaryClass="@($"h6 text-truncate {(context.Active ? "emphasis--text" : "regular--text")} mb-2")"
                                        SecondaryClass="@($"subtitle text-truncate {(context.Active ? "regular2--text" : "regular3--text")} ")">
                            </PBlockText>
                        </MCol>
                    </MItem>
                    <MItem>
                        <MCol Class="slider-item" Cols="4" @onclick="() => _carouselValue = 1">
                            <div class="number @context.ActiveClass">02</div>
                            <PBlockText Style="width: calc(100% - 56px)"
                                        Primary="传统.NET中大型项目升级宝典"
                                        Secondary="使用MASA Stack对现有.NET程序进行现代化改造"
                                        PrimaryClass="@($"h6 text-truncate {(context.Active ? "emphasis--text" : "regular--text")} mb-2")"
                                        SecondaryClass="@($"subtitle text-truncate {(context.Active ? "regular2--text" : "regular3--text")} ")">
                            </PBlockText>
                        </MCol>
                    </MItem>
                    <MItem>
                        <MCol Class="slider-item" Cols="4" @onclick="() => _carouselValue = 2">
                            <div class="number @context.ActiveClass">03</div>
                            <PBlockText Style="width: calc(100% - 56px)"
                                        Primary=".NET开发者迈向云原生如何选择？"
                                        Secondary=".NET数字化转型人才成长最优解"
                                        PrimaryClass="@($"h6 text-truncate {(context.Active ? "emphasis--text" : "regular--text")} mb-2")"
                                        SecondaryClass="@($"subtitle text-truncate {(context.Active ? "regular2--text" : "regular3--text")} ")">
                            </PBlockText>
                        </MCol>
                    </MItem>
                </MRow>
            </MItemGroup>
        </div>
    }
</div>

<div class="home-content">
    <div class="home-content__item full-page" id="product-content">
        <div class="home-content__item-header">
            <MenuableTitle Disabled="!IsMobile" Items="MenuableTitleItems">产品</MenuableTitle>
            <div class="home-content__item-subtitle">Modern App & Service Architecture</div>
        </div>
        <MRow NoGutters="IsMobile" class="home-content__item-cards">
            <MCol Cols="12" Md="4">
                <ProductCard Title="MASA Stack"
                             Href="/stack"
                             Image="https://cdn.masastack.com/images/home_logn.svg"
                             Description="开源企业级开发者门户  平台工程，包含企业IT现代化应用开发交付的全部板块，如应用治理、服务编排与集成、数据治理、可观测性、DevOps研发协作、AI智能等一站式解决方案">
                </ProductCard>
            </MCol>
            <MCol Cols="12" Md="4">
                <ProductCard Title="MASA Framework"
                             Href="/framework"
                             Image="https://cdn.masastack.com/images/framework_logo.svg"
                             Description=".NET下一代微服务开发框架，内嵌分布式运行时——Dapr云原生最佳实践，能够快速实现分布式、微服务、DDD、SaaS等现代化应用开发">
                </ProductCard>
            </MCol>
            <MCol Cols="12" Md="4">
                <ProductCard Title="MASA Blazor"
                             Href="/blazor"
                             Image="https://cdn.masastack.com/images/blazor_logo.svg"
                             Description="基于Material设计规范的Blazor组件库，打造企业级.NET全栈解决方案，具有模块化、响应式和优秀的性能，并实现MAUI多端适配">
                </ProductCard>
            </MCol>
        </MRow>
    </div>

    <div class="home-content__item full-page fire" id="activity-content">
        <div class="home-content__item-header">
            <MenuableTitle Disabled="!IsMobile" Items="MenuableTitleItems">最新活动</MenuableTitle>
            <div class="home-content__item-subtitle">最新社区活动预告与往期回顾</div>
        </div>
        <MRow NoGutters="IsMobile" class="home-content__item-cards">
            @foreach (var item in s_activities.OrderByDescending(a => a.StartAt).Take(3))
            {
                <MCol Cols="12" Md="4">
                    <ActivityCard Data="item" />
                </MCol>
            }
        </MRow>

        <More Href="/activity">更多活动</More>
    </div>
</div>
